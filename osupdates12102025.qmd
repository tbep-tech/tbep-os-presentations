---
title: "OPEN SCIENCE UPDATES"
author: 
   - name: Dr. Marcus Beck, <mbeck@tbep.org>
institute: "Tampa Bay Estuary Program"
date: "12/10/2025"
format:
  revealjs:
    logo: figure/TBEP_logo.png
    transition: fade
    footer: "Tampa Bay Estuary Program, Open Science Subcommittee"
    theme: styles.scss
    link-external-icon: true
    linkcolor: "#00806E"
    link-external-newwindow: true
lightbox: true   
execute:
  echo: false
  message: false
  warning: false
---

```{r}
#| include: false
library(knitr)
library(tbeptools)
library(ggplot2)
library(here)
library(dplyr)
library(leaflet)
library(tidyr)
```

------------------------------------------------------------------------

## ROLES AND RESPONSIBILITIES

1.  Support development of open science products at TBEP

2.  Rank priority research areas for developing open science products

3.  Facilitate training activities

[Guiding Document](https://docs.google.com/document/d/1w6dVTwfYYDRVzGPXy0jyHxV4mwOutEY_ISMP1oAdZ_c/edit)

------------------------------------------------------------------------

## 2025 SEAGRASS TRANSECTS

<https://shiny.tbep.org/seagrasstransect-dash>

![](figure/seagrassdash2025.png)

------------------------------------------------------------------------

## 2025 SEAGRASS TRANSECTS

```{r}
maxyr <- 2025
transectocc <- anlz_transectocc(transect)
toplo <- anlz_transectavespp(transectocc, total = T, bay_segment = c('OTB', 'HB', 'MTB', 'LTB'), yrrng = c(1998, maxyr), species = c('Halodule', 'Syringodium', 'Thalassia'), by_seg = T) %>%
  filter(Savspecies == 'total') |>
  arrange(bay_segment, yr) |>
  mutate(
    fochg = foest - lag(foest),
    chgsgn = ifelse(fochg > 0, 'increase', 'decrease')
  ) |>
  na.omit()
ggplot(toplo, aes(x = yr, y = foest)) +
  geom_line() + 
  geom_point(aes(fill = chgsgn), color = 'black', pch = 21, size = 2) +
  geom_point(data = toplo[toplo$yr == maxyr, ], aes(fill = chgsgn), color = 'black', size = 4, pch = 21, stroke = 2) +
  facet_wrap(~bay_segment, ncol = 2) +
  geom_hline(yintercept = 0) +
  scale_y_continuous(labels = scales::percent) +
  labs(
    x = NULL,
    y = 'Frequency of Occurrence'
  ) +
  scale_fill_manual(values = c('increase' = '#2DC938', 'decrease' = '#CC3231')) +
  theme_minimal() +
  theme(
    legend.position = 'none',
    strip.text = element_text(size = 12),
    strip.background = element_blank(),
    panel.grid.major.x = element_blank(),
    panel.grid.minor = element_blank()
  )
```

------------------------------------------------------------------------

## 2025 SEAGRASS TRANSECTS BY SITE 

```{r}
#| out-width: 100%
toplo <- transectocc |> 
  ungroup() |> 
  mutate(
    yr = lubridate::year(Date)
  ) |> 
  filter(Savspecies %in% 'total') |> 
  filter(yr >= 2024) |> 
  select(Transect, yr, foest) |> 
  summarise(
    foest = mean(foest, na.rm = T), 
    .by = c(Transect, yr)
  ) |> 
  mutate(
    cnt = n(), 
    .by = Transect
  ) |> 
  filter(cnt == 2) |> 
  select(-cnt) |> 
  pivot_wider(
    names_from = yr, 
    values_from = foest
  ) |> 
  mutate(
    chg = abs(`2025` - `2024`),
    sgn = sign(`2025` - `2024`)
  )
tomap <- inner_join(trnpts, toplo, by = c('TRAN_ID' = 'Transect')) |> 
  select(TRAN_ID, chg, sgn, '2024', '2025')

# make leaflet map with points sized by change and colored by sign
# add bay segment lines from tbseglines
leaflet(tomap) |> 
  addProviderTiles(providers$CartoDB.Positron) |> 
  addPolylines(data = tbseglines, color = 'blue', weight = 2, opacity = 0.5) |>
  addCircleMarkers(
    radius = ~ scales::rescale(chg, to = c(5, 15)),
    color = ~ ifelse(sgn > 0, '#2DC938', '#CC3231'),
    stroke = TRUE,
    weight = 1,
    fillOpacity = 0.8,
    label = ~ lapply(paste0('Transect: ', TRAN_ID, '<br>',
                    '2024 F.O.: ', scales::percent(`2024`, accuracy = 0.1), '<br>',
                    '2025 F.O.: ', scales::percent(`2025`, accuracy = 0.1), '<br>',
                    'Change: ', ifelse(sgn > 0, '+', ''), scales::percent(`2025` - `2024`, accuracy = 0.1)), htmltools::HTML)
  ) |> 
  addLegend(
    position = 'bottomright',
    colors = c('#2DC938', '#CC3231'),
    labels = c('Increase', 'Decrease'),
    title = 'Frequency of Occurrence Change (2024 - 2025)'
  )
```

------------------------------------------------------------------------

## 2024 NEKTON DASHBOARD

<https://shiny.tbep.org/nekton-dash>

![](figure/nekton2024.png)

------------------------------------------------------------------------

## 2024 NEKTON DASHBOARD

```{r}
#| out-width: 90%
tbniscr <- anlz_tbniscr(fimdata)
show_tbniscr(tbniscr, plotly = T) |> 
    plotly::config(displayModeBar = F)
```

------------------------------------------------------------------------

## 2025 SCALLOP SEARCH

<https://tbep-tech.github.io/scallop-search/>

![](figure/scallopdash2025.png)

------------------------------------------------------------------------

## 2022 - 2024 TAMPA BAY LOAD DATA

<https://tbep.org/tampa-bay-nitrogen-loads>

![](figure/loadests2224.png)

------------------------------------------------------------------------

## WATER ATLAS API

<https://dev.api.wateratlas.org>

![](figure/waapi.png)

------------------------------------------------------------------------

## WATER ATLAS API

<https://tbep-tech.github.io/tbeptools/reference/read_importwqwa.html>

![](figure/waapitbeptools.png)

------------------------------------------------------------------------

## TOOLS, TRAININGS, AND GOOD READS

-  [CERF R training](https://tbep-tech.github.io/cerf-r-workshop){target='_blank'}
-  [Posit::conf 2025 talks](https://youtube.com/playlist?list=PL9HYL-VRX0oTixlfDPCS5RW_F1pccERRe&si=kzA764FSL8CQ97Ye){target='_blank'}
-  [Are 'forever chemicals' in my drinking water?](https://data.usatoday.com/projects/pfas-map/index.html){target='_blank'}
-  [Six questions to ask before jumping into a spreadsheet](https://archive.ph/nnZKQ){target='_blank'}
-  [A gentle introduction to open science](https://ropensci.org/blog/2025/09/23/gentle-openscience/){target='_blank'}

------------------------------------------------------------------------

## UPCOMING SCHEDULE

<https://tbep.org/get-involved/calendar/> 

-   January 7th, Tampa Bay Environmental Restoration Fund RFP open
-   January 14th, SWFL Regional Ambient Monitoring Program Meeting
-   January 21st, TAC meeting
-   January 21st, CAC meeting

OpenScience Subcommittee 2026 schedule: __6/24__, __12/09__
